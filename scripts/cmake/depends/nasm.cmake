find_program(NASM_BIN nasm)
set(NASM_BIN ${NASM_BIN} CACHE INTERNAL "")
execute_process(COMMAND ${NASM_BIN} -v OUTPUT_VARIABLE NASM_ID OUTPUT_STRIP_TRAILING_WHITESPACE)
set(CMAKE_ASM_NASM_COMPILER_ID ${NASM_ID})
if(CMAKE_TOOLCHAIN_FILE)
    set(CMAKE_ASM_NASM_OBJECT_FORMAT "elf64")
endif()
enable_language(ASM_NASM)
